/*!
 * FullCalendar v1.6.2
 * Docs & License: http://arshaw.com/fullcalendar/
 * (c) 2013 Adam Shaw
 */
(function(t,e){function n(e){t.extend(!0,ge,e)}function r(n,r,c){function u(t){G?(T(),M(),N(),w(t)):f()}function f(){K=r.theme?"ui":"fc",n.addClass("fc"),r.isRTL?n.addClass("fc-rtl"):n.addClass("fc-ltr"),r.theme&&n.addClass("ui-widget"),G=t("<div class='fc-content' style='position:relative'/>").prependTo(n),$=new a(Z,r),Q=$.render(),Q&&n.prepend(Q),y(r.defaultView),t(window).resize(E),m()||v()}function v(){setTimeout(function(){!te.start&&m()&&w()},0)}function h(){t(window).unbind("resize",E),$.destroy(),G.remove(),n.removeClass("fc fc-rtl ui-widget")}function p(){return 0!==se.offsetWidth}function m(){return 0!==t("body")[0].offsetWidth}function y(e){if(!te||e!=te.name){ue++,L();var n,r=te;r?((r.beforeHide||O)(),A(G,G.height()),r.element.hide()):A(G,1),G.css("overflow","hidden"),te=le[e],te?te.element.show():te=le[e]=new ye[e](n=re=t("<div class='fc-view fc-view-"+e+"' style='position:absolute'/>").appendTo(G),Z),r&&$.deactivateButton(r.name),$.activateButton(e),w(),G.css("overflow",""),r&&A(G,1),n||(te.afterShow||O)(),ue--}}function w(t){if(p()){ue++,L(),ne===e&&T();var r=!1;!te.start||t||te.start>fe||fe>=te.end?(te.render(fe,t||0),S(!0),r=!0):te.sizeDirty?(te.clearEvents(),S(),r=!0):te.eventsDirty&&(te.clearEvents(),r=!0),te.sizeDirty=!1,te.eventsDirty=!1,x(r),ee=n.outerWidth(),$.updateTitle(te.title);var a=new Date;a>=te.start&&te.end>a?$.disableButton("today"):$.enableButton("today"),ue--,te.trigger("viewDisplay",se)}}function C(){M(),p()&&(T(),S(),L(),te.clearEvents(),te.renderEvents(de),te.sizeDirty=!1)}function M(){t.each(le,function(t,e){e.sizeDirty=!0})}function T(){ne=r.contentHeight?r.contentHeight:r.height?r.height-(Q?Q.height():0)-F(G):Math.round(G.width()/Math.max(r.aspectRatio,.5))}function S(t){ue++,te.setHeight(ne,t),re&&(re.css("position","relative"),re=null),te.setWidth(G.width(),t),ue--}function E(){if(!ue)if(te.start){var t=++ce;setTimeout(function(){t==ce&&!ue&&p()&&ee!=(ee=n.outerWidth())&&(ue++,C(),te.trigger("windowResize",se),ue--)},200)}else v()}function x(t){!r.lazyFetching||oe(te.visStart,te.visEnd)?k():t&&R()}function k(){ie(te.visStart,te.visEnd)}function H(t){de=t,R()}function z(t){R(t)}function R(t){N(),p()&&(te.clearEvents(),te.renderEvents(de,t),te.eventsDirty=!1)}function N(){t.each(le,function(t,e){e.eventsDirty=!0})}function W(t,n,r){te.select(t,n,r===e?!0:r)}function L(){te&&te.unselect()}function _(){w(-1)}function q(){w(1)}function B(){i(fe,-1),w()}function I(){i(fe,1),w()}function P(){fe=new Date,w()}function j(t,e,n){t instanceof Date?fe=d(t):g(fe,t,e,n),w()}function Y(t,n,r){t!==e&&i(fe,t),n!==e&&s(fe,n),r!==e&&l(fe,r),w()}function J(){return d(fe)}function V(){return te}function X(t,n){return n===e?r[t]:(("height"==t||"contentHeight"==t||"aspectRatio"==t)&&(r[t]=n,C()),e)}function U(t,n){return r[t]?r[t].apply(n||se,Array.prototype.slice.call(arguments,2)):e}var Z=this;Z.options=r,Z.render=u,Z.destroy=h,Z.refetchEvents=k,Z.reportEvents=H,Z.reportEventChange=z,Z.rerenderEvents=R,Z.changeView=y,Z.select=W,Z.unselect=L,Z.prev=_,Z.next=q,Z.prevYear=B,Z.nextYear=I,Z.today=P,Z.gotoDate=j,Z.incrementDate=Y,Z.formatDate=function(t,e){return b(t,e,r)},Z.formatDates=function(t,e,n){return D(t,e,n,r)},Z.getDate=J,Z.getView=V,Z.option=X,Z.trigger=U,o.call(Z,r,c);var $,Q,G,K,te,ee,ne,re,ae,oe=Z.isFetchNeeded,ie=Z.fetchEvents,se=n[0],le={},ce=0,ue=0,fe=new Date,de=[];g(fe,r.year,r.month,r.date),r.droppable&&t(document).bind("dragstart",function(e,n){var a=e.target,o=t(a);if(!o.parents(".fc").length){var i=r.dropAccept;(t.isFunction(i)?i.call(a,o):o.is(i))&&(ae=a,te.dragStart(ae,e,n))}}).bind("dragstop",function(t,e){ae&&(te.dragStop(ae,t,e),ae=null)})}function a(n,r){function a(){v=r.theme?"ui":"fc";var n=r.header;return n?h=t("<table class='fc-header' style='width:100%'/>").append(t("<tr/>").append(i("left")).append(i("center")).append(i("right"))):e}function o(){h.remove()}function i(e){var a=t("<td class='fc-header-"+e+"'/>"),o=r.header[e];return o&&t.each(o.split(" "),function(e){e>0&&a.append("<span class='fc-header-space'/>");var o;t.each(this.split(","),function(e,i){if("title"==i)a.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),o&&o.addClass(v+"-corner-right"),o=null;else{var s;if(n[i]?s=n[i]:ye[i]&&(s=function(){u.removeClass(v+"-state-hover"),n.changeView(i)}),s){var l=r.theme?B(r.buttonIcons,i):null,c=B(r.buttonText,i),u=t("<span class='fc-button fc-button-"+i+" "+v+"-state-default'>"+(l?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+l+"'/>"+"</span>":c)+"</span>").click(function(){u.hasClass(v+"-state-disabled")||s()}).mousedown(function(){u.not("."+v+"-state-active").not("."+v+"-state-disabled").addClass(v+"-state-down")}).mouseup(function(){u.removeClass(v+"-state-down")}).hover(function(){u.not("."+v+"-state-active").not("."+v+"-state-disabled").addClass(v+"-state-hover")},function(){u.removeClass(v+"-state-hover").removeClass(v+"-state-down")}).appendTo(a);P(u),o||u.addClass(v+"-corner-left"),o=u}}}),o&&o.addClass(v+"-corner-right")}),a}function s(t){h.find("h2").html(t)}function l(t){h.find("span.fc-button-"+t).addClass(v+"-state-active")}function c(t){h.find("span.fc-button-"+t).removeClass(v+"-state-active")}function u(t){h.find("span.fc-button-"+t).addClass(v+"-state-disabled")}function f(t){h.find("span.fc-button-"+t).removeClass(v+"-state-disabled")}var d=this;d.render=a,d.destroy=o,d.updateTitle=s,d.activateButton=l,d.deactivateButton=c,d.disableButton=u,d.enableButton=f;var v,h=t([])}function o(n,r){function a(t,e){return!T||T>t||e>S}function o(t,e){T=t,S=e,W=[];var n=++F,r=z.length;R=r;for(var a=0;r>a;a++)i(z[a],n)}function i(e,r){s(e,function(a){if(r==F){if(a){n.eventDataTransform&&(a=t.map(a,n.eventDataTransform)),e.eventDataTransform&&(a=t.map(a,e.eventDataTransform));for(var o=0;a.length>o;o++)a[o].source=e,b(a[o]);W=W.concat(a)}R--,R||k(W)}})}function s(r,a){var o,i,l=me.sourceFetchers;for(o=0;l.length>o;o++){if(i=l[o](r,T,S,a),i===!0)return;if("object"==typeof i)return s(i,a),e}var c=r.events;if(c)t.isFunction(c)?(m(),c(d(T),d(S),function(t){a(t),y()})):t.isArray(c)?a(c):a();else{var u=r.url;if(u){var f=r.success,v=r.error,h=r.complete,g=t.extend({},r.data||{}),p=V(r.startParam,n.startParam),b=V(r.endParam,n.endParam);p&&(g[p]=Math.round(+T/1e3)),b&&(g[b]=Math.round(+S/1e3)),m(),t.ajax(t.extend({},be,r,{data:g,success:function(e){e=e||[];var n=J(f,this,arguments);t.isArray(n)&&(e=n),a(e)},error:function(){J(v,this,arguments),a()},complete:function(){J(h,this,arguments),y()}}))}else a()}}function l(t){t=c(t),t&&(R++,i(t,F))}function c(n){return t.isFunction(n)||t.isArray(n)?n={events:n}:"string"==typeof n&&(n={url:n}),"object"==typeof n?(D(n),z.push(n),n):e}function u(e){z=t.grep(z,function(t){return!w(t,e)}),W=t.grep(W,function(t){return!w(t.source,e)}),k(W)}function f(t){var e,n,r=W.length,a=x().defaultEventEnd,o=t.start-t._start,i=t.end?t.end-(t._end||a(t)):0;for(e=0;r>e;e++)n=W[e],n._id==t._id&&n!=t&&(n.start=new Date(+n.start+o),n.end=t.end?n.end?new Date(+n.end+i):new Date(+a(n)+i):null,n.title=t.title,n.url=t.url,n.allDay=t.allDay,n.className=t.className,n.editable=t.editable,n.color=t.color,n.backgroundColor=t.backgroundColor,n.borderColor=t.borderColor,n.textColor=t.textColor,b(n));b(t),k(W)}function v(t,e){b(t),t.source||(e&&(H.events.push(t),t.source=H),W.push(t)),k(W)}function h(e){if(e){if(!t.isFunction(e)){var n=e+"";e=function(t){return t._id==n}}W=t.grep(W,e,!0);for(var r=0;z.length>r;r++)t.isArray(z[r].events)&&(z[r].events=t.grep(z[r].events,e,!0))}else{W=[];for(var r=0;z.length>r;r++)t.isArray(z[r].events)&&(z[r].events=[])}k(W)}function g(e){return t.isFunction(e)?t.grep(W,e):e?(e+="",t.grep(W,function(t){return t._id==e})):W}function m(){N++||E("loading",null,!0)}function y(){--N||E("loading",null,!1)}function b(t){var r=t.source||{},a=V(r.ignoreTimezone,n.ignoreTimezone);t._id=t._id||(t.id===e?"_fc"+De++:t.id+""),t.date&&(t.start||(t.start=t.date),delete t.date),t._start=d(t.start=p(t.start,a)),t.end=p(t.end,a),t.end&&t.end<=t.start&&(t.end=null),t._end=t.end?d(t.end):null,t.allDay===e&&(t.allDay=V(r.allDayDefault,n.allDayDefault)),t.className?"string"==typeof t.className&&(t.className=t.className.split(/\s+/)):t.className=[]}function D(t){t.className?"string"==typeof t.className&&(t.className=t.className.split(/\s+/)):t.className=[];for(var e=me.sourceNormalizers,n=0;e.length>n;n++)e[n](t)}function w(t,e){return t&&e&&C(t)==C(e)}function C(t){return("object"==typeof t?t.events||t.url:"")||t}var M=this;M.isFetchNeeded=a,M.fetchEvents=o,M.addEventSource=l,M.removeEventSource=u,M.updateEvent=f,M.renderEvent=v,M.removeEvents=h,M.clientEvents=g,M.normalizeEvent=b;for(var T,S,E=M.trigger,x=M.getView,k=M.reportEvents,H={events:[]},z=[H],F=0,R=0,N=0,W=[],A=0;r.length>A;A++)c(r[A])}function i(t,e,n){return t.setFullYear(t.getFullYear()+e),n||f(t),t}function s(t,e,n){if(+t){var r=t.getMonth()+e,a=d(t);for(a.setDate(1),a.setMonth(r),t.setMonth(r),n||f(t);t.getMonth()!=a.getMonth();)t.setDate(t.getDate()+(a>t?1:-1))}return t}function l(t,e,n){if(+t){var r=t.getDate()+e,a=d(t);a.setHours(9),a.setDate(r),t.setDate(r),n||f(t),c(t,a)}return t}function c(t,e){if(+t)for(;t.getDate()!=e.getDate();)t.setTime(+t+(e>t?1:-1)*Me)}function u(t,e){return t.setMinutes(t.getMinutes()+e),t}function f(t){return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t}function d(t,e){return e?f(new Date(+t)):new Date(+t)}function v(){var t,e=0;do t=new Date(1970,e++,1);while(t.getHours());return t}function h(t,e){return Math.round((d(t,!0)-d(e,!0))/Ce)}function g(t,n,r,a){n!==e&&n!=t.getFullYear()&&(t.setDate(1),t.setMonth(0),t.setFullYear(n)),r!==e&&r!=t.getMonth()&&(t.setDate(1),t.setMonth(r)),a!==e&&t.setDate(a)}function p(t,n){return"object"==typeof t?t:"number"==typeof t?new Date(1e3*t):"string"==typeof t?t.match(/^\d+(\.\d+)?$/)?new Date(1e3*parseFloat(t)):(n===e&&(n=!0),m(t,n)||(t?new Date(t):null)):null}function m(t,e){var n=t.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!n)return null;var r=new Date(n[1],0,1);if(e||!n[13]){var a=new Date(n[1],0,1,9,0);n[3]&&(r.setMonth(n[3]-1),a.setMonth(n[3]-1)),n[5]&&(r.setDate(n[5]),a.setDate(n[5])),c(r,a),n[7]&&r.setHours(n[7]),n[8]&&r.setMinutes(n[8]),n[10]&&r.setSeconds(n[10]),n[12]&&r.setMilliseconds(1e3*Number("0."+n[12])),c(r,a)}else if(r.setUTCFullYear(n[1],n[3]?n[3]-1:0,n[5]||1),r.setUTCHours(n[7]||0,n[8]||0,n[10]||0,n[12]?1e3*Number("0."+n[12]):0),n[14]){var o=60*Number(n[16])+(n[18]?Number(n[18]):0);o*="-"==n[15]?1:-1,r=new Date(+r+1e3*60*o)}return r}function y(t){if("number"==typeof t)return 60*t;if("object"==typeof t)return 60*t.getHours()+t.getMinutes();var e=t.match(/(\d+)(?::(\d+))?\s*(\w+)?/);if(e){var n=parseInt(e[1],10);return e[3]&&(n%=12,"p"==e[3].toLowerCase().charAt(0)&&(n+=12)),60*n+(e[2]?parseInt(e[2],10):0)}}function b(t,e,n){return D(t,null,e,n)}function D(t,e,n,r){r=r||ge;var a,o,i,s,l=t,c=e,u=n.length,f="";for(a=0;u>a;a++)if(o=n.charAt(a),"'"==o){for(i=a+1;u>i;i++)if("'"==n.charAt(i)){l&&(f+=i==a+1?"'":n.substring(a+1,i),a=i);break}}else if("("==o){for(i=a+1;u>i;i++)if(")"==n.charAt(i)){var d=b(l,n.substring(a+1,i),r);parseInt(d.replace(/\D/,""),10)&&(f+=d),a=i;break}}else if("["==o){for(i=a+1;u>i;i++)if("]"==n.charAt(i)){var v=n.substring(a+1,i),d=b(l,v,r);d!=b(c,v,r)&&(f+=d),a=i;break}}else if("{"==o)l=e,c=t;else if("}"==o)l=t,c=e;else{for(i=u;i>a;i--)if(s=Se[n.substring(a,i)]){l&&(f+=s(l,r)),a=i-1;break}i==a&&l&&(f+=o)}return f}function w(t){var e,n=new Date(t.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),e=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((e-n)/864e5)/7)+1}function C(t){return t.end?M(t.end,t.allDay):l(d(t.start),1)}function M(t,e){return t=d(t),e||t.getHours()||t.getMinutes()?l(t,1):f(t)}function T(n,r,a){n.unbind("mouseover").mouseover(function(n){for(var o,i,s,l=n.target;l!=this;)o=l,l=l.parentNode;(i=o._fci)!==e&&(o._fci=e,s=r[i],a(s.event,s.element,s),t(n.target).trigger(n)),n.stopPropagation()})}function S(e,n,r){for(var a,o=0;e.length>o;o++)a=t(e[o]),a.width(Math.max(0,n-x(a,r)))}function E(e,n,r){for(var a,o=0;e.length>o;o++)a=t(e[o]),a.height(Math.max(0,n-F(a,r)))}function x(t,e){return k(t)+z(t)+(e?H(t):0)}function k(e){return(parseFloat(t.css(e[0],"paddingLeft",!0))||0)+(parseFloat(t.css(e[0],"paddingRight",!0))||0)}function H(e){return(parseFloat(t.css(e[0],"marginLeft",!0))||0)+(parseFloat(t.css(e[0],"marginRight",!0))||0)}function z(e){return(parseFloat(t.css(e[0],"borderLeftWidth",!0))||0)+(parseFloat(t.css(e[0],"borderRightWidth",!0))||0)}function F(t,e){return R(t)+W(t)+(e?N(t):0)}function R(e){return(parseFloat(t.css(e[0],"paddingTop",!0))||0)+(parseFloat(t.css(e[0],"paddingBottom",!0))||0)}function N(e){return(parseFloat(t.css(e[0],"marginTop",!0))||0)+(parseFloat(t.css(e[0],"marginBottom",!0))||0)}function W(e){return(parseFloat(t.css(e[0],"borderTopWidth",!0))||0)+(parseFloat(t.css(e[0],"borderBottomWidth",!0))||0)}function A(t,e){e="number"==typeof e?e+"px":e,t.each(function(t,n){n.style.cssText+=";min-height:"+e+";_height:"+e})}function O(){}function L(t,e){return t-e}function _(t){return Math.max.apply(Math,t)}function q(t){return(10>t?"0":"")+t}function B(t,n){if(t[n]!==e)return t[n];for(var r,a=n.split(/(?=[A-Z])/),o=a.length-1;o>=0;o--)if(r=t[a[o].toLowerCase()],r!==e)return r;return t[""]}function I(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function P(t){t.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function j(t){t.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function Y(t,e){var n=t.source||{},r=t.color,a=n.color,o=e("eventColor"),i=t.backgroundColor||r||n.backgroundColor||a||e("eventBackgroundColor")||o,s=t.borderColor||r||n.borderColor||a||e("eventBorderColor")||o,l=t.textColor||n.textColor||e("eventTextColor"),c=[];return i&&c.push("background-color:"+i),s&&c.push("border-color:"+s),l&&c.push("color:"+l),c.join(";")}function J(e,n,r){if(t.isFunction(e)&&(e=[e]),e){var a,o;for(a=0;e.length>a;a++)o=e[a].apply(n,r)||o;return o}}function V(){for(var t=0;arguments.length>t;t++)if(arguments[t]!==e)return arguments[t]}function X(t,e){function n(t,e){e&&(s(t,e),t.setDate(1));var n=a("firstDay"),f=d(t,!0);f.setDate(1);var v=s(d(f),1),g=d(f);l(g,-((g.getDay()-n+7)%7)),i(g);var p=d(v);l(p,(7-p.getDay()+n)%7),i(p,-1,!0);var m=c(),y=Math.round(h(p,g)/7);"fixed"==a("weekMode")&&(l(p,7*(6-y)),y=6),r.title=u(f,a("titleFormat")),r.start=f,r.end=v,r.visStart=g,r.visEnd=p,o(y,m,!0)}var r=this;r.render=n,$.call(r,t,e,"month");var a=r.opt,o=r.renderBasic,i=r.skipHiddenDays,c=r.getCellsPerWeek,u=e.formatDate}function U(t,e){function n(t,e){e&&l(t,7*e);var n=l(d(t),-((t.getDay()-a("firstDay")+7)%7)),u=l(d(n),7),f=d(n);i(f);var v=d(u);i(v,-1,!0);var h=s();r.start=n,r.end=u,r.visStart=f,r.visEnd=v,r.title=c(f,l(d(v),-1),a("titleFormat")),o(1,h,!1)}var r=this;r.render=n,$.call(r,t,e,"basicWeek");var a=r.opt,o=r.renderBasic,i=r.skipHiddenDays,s=r.getCellsPerWeek,c=e.formatDates}function Z(t,e){function n(t,e){e&&l(t,e),i(t,0>e?-1:1);var n=d(t,!0),c=l(d(n),1);r.title=s(t,a("titleFormat")),r.start=r.visStart=n,r.end=r.visEnd=c,o(1,1,!1)}var r=this;r.render=n,$.call(r,t,e,"basicDay");var a=r.opt,o=r.renderBasic,i=r.skipHiddenDays,s=e.formatDate}function $(e,n,r){function a(t,e,n){ae=t,ie=e,se=n,o();var r=!V;r?i():Se(),s()}function o(){me=Me("theme")?"ui":"fc",ye=Me("columnFormat"),be=Me("weekNumbers"),De=Me("weekNumberTitle"),Ce="iso"!=Me("weekNumberCalculation")?"w":"W"}function i(){K=t("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(e)}function s(){var n=c();L(),B&&B.remove(),B=t(n).appendTo(e),Y=B.find("thead"),J=Y.find(".fc-day-header"),V=B.find("tbody"),X=V.find("tr"),U=V.find(".fc-day"),Z=X.find("td:first-child"),$=X.eq(0).find(".fc-day > div"),G=X.eq(0).find(".fc-day-content > div"),j(Y.add(Y.find("tr"))),j(X),X.eq(0).addClass("fc-first"),X.filter(":last").addClass("fc-last"),U.each(function(e,n){var r=He(Math.floor(e/ie),e%ie);Te("dayRender",q,r,t(n))}),y(U)}function c(){var t="<table class='fc-border-separate' style='width:100%' cellspacing='0'>"+u()+v()+"</table>";return t}function u(){var t,e,n=me+"-widget-header",r="";for(r+="<thead><tr>",be&&(r+="<th class='fc-week-number "+n+"'>"+I(De)+"</th>"),t=0;ie>t;t++)e=He(0,t),r+="<th class='fc-day-header fc-"+we[e.getDay()]+" "+n+"'>"+I(Re(e,ye))+"</th>";return r+="</tr></thead>"}function v(){var t,e,n,r=me+"-widget-content",a="";for(a+="<tbody>",t=0;ae>t;t++){for(a+="<tr class='fc-week'>",be&&(n=He(t,0),a+="<td class='fc-week-number "+r+"'>"+"<div>"+I(Re(n,Ce))+"</div>"+"</td>"),e=0;ie>e;e++)n=He(t,e),a+=h(n);a+="</tr>"}return a+="</tbody>"}function h(t){var e=me+"-widget-content",n=q.start.getMonth(),r=f(new Date),a="",o=["fc-day","fc-"+we[t.getDay()],e];return t.getMonth()!=n&&o.push("fc-other-month"),+t==+r&&o.push("fc-today",me+"-state-highlight"),a+="<td class='"+o.join(" ")+"'"+" data-date='"+Re(t,"yyyy-MM-dd")+"'"+">"+"<div>",se&&(a+="<div class='fc-day-number'>"+t.getDate()+"</div>"),a+="<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>"}function g(e){ee=e;var n,r,a,o=ee-Y.height();"variable"==Me("weekMode")?n=r=Math.floor(o/(1==ae?2:6)):(n=Math.floor(o/ae),r=o-n*(ae-1)),Z.each(function(e,o){ae>e&&(a=t(o),A(a.find("> div"),(e==ae-1?r:n)-F(a)))}),_()}function p(t){te=t,ge.clear(),pe.clear(),re=0,be&&(re=Y.find("th.fc-week-number").outerWidth()),ne=Math.floor((te-re)/ie),S(J.slice(0,-1),ne)}function y(t){t.click(b).mousedown(ke)}function b(e){if(!Me("selectable")){var n=m(t(this).data("date"));Te("dayClick",this,n,!0,e)}}function D(t,e,n){n&&le.build();for(var r=Fe(t,e),a=0;r.length>a;a++){var o=r[a];y(w(o.row,o.leftCol,o.row,o.rightCol))}}function w(t,n,r,a){var o=le.rect(t,n,r,a,e);return Ee(o,e)}function C(t){return d(t)}function M(t,e){D(t,l(d(e),1),!0)}function T(){xe()}function E(t,e,n){var r=ze(t),a=U[r.row*ie+r.col];Te("dayClick",a,t,e,n)}function x(t,e){ve.start(function(t){xe(),t&&w(t.row,t.col,t.row,t.col)},e)}function k(t,e,n){var r=ve.stop();if(xe(),r){var a=He(r);Te("drop",t,a,!0,e,n)}}function H(t){return d(t.start)}function z(t){return ge.left(t)}function R(t){return ge.right(t)}function N(t){return pe.left(t)}function W(t){return pe.right(t)}function O(t){return X.eq(t)}function L(){A(e,e.height())}function _(){A(e,1)}var q=this;q.renderBasic=a,q.setHeight=g,q.setWidth=p,q.renderDayOverlay=D,q.defaultSelectionEnd=C,q.renderSelection=M,q.clearSelection=T,q.reportDayClick=E,q.dragStart=x,q.dragStop=k,q.defaultEventEnd=H,q.getHoverListener=function(){return ve},q.colLeft=z,q.colRight=R,q.colContentLeft=N,q.colContentRight=W,q.getIsCellAllDay=function(){return!0},q.allDayRow=O,q.getRowCnt=function(){return ae},q.getColCnt=function(){return ie},q.getColWidth=function(){return ne},q.getDaySegmentContainer=function(){return K},oe.call(q,e,n,r),ue.call(q),ce.call(q),Q.call(q);var B,Y,J,V,X,U,Z,$,G,K,te,ee,ne,re,ae,ie,se,le,ve,ge,pe,me,ye,be,De,Ce,Me=q.opt,Te=q.trigger,Se=q.clearEvents,Ee=q.renderOverlay,xe=q.clearOverlays,ke=q.daySelectionMousedown,He=q.cellToDate,ze=q.dateToCell,Fe=q.rangeToSegments,Re=n.formatDate;P(e.addClass("fc-grid")),le=new fe(function(e,n){var r,a,o;J.each(function(e,i){r=t(i),a=r.offset().left,e&&(o[1]=a),o=[a],n[e]=o}),o[1]=a+r.outerWidth(),X.each(function(n,i){ae>n&&(r=t(i),a=r.offset().top,n&&(o[1]=a),o=[a],e[n]=o)}),o[1]=a+r.outerHeight()}),ve=new de(le),ge=new he(function(t){return $.eq(t)}),pe=new he(function(t){return G.eq(t)})}function Q(){function t(t,e){n.reportEvents(t),n.renderDayEvents(t,e),n.trigger("eventAfterAllRender")}function e(){n.reportEventClear(),n.getDaySegmentContainer().empty()}var n=this;n.renderEvents=t,n.clearEvents=e,ie.call(n)}function G(t,e){function n(t,e){e&&l(t,7*e);var n=l(d(t),-((t.getDay()-a("firstDay")+7)%7)),u=l(d(n),7),f=d(n);i(f);var v=d(u);i(v,-1,!0);var h=s();r.title=c(f,l(d(v),-1),a("titleFormat")),r.start=n,r.end=u,r.visStart=f,r.visEnd=v,o(h)}var r=this;r.render=n,te.call(r,t,e,"agendaWeek");var a=r.opt,o=r.renderAgenda,i=r.skipHiddenDays,s=r.getCellsPerWeek,c=e.formatDates}function K(t,e){function n(t,e){e&&l(t,e),i(t,0>e?-1:1);var n=d(t,!0),c=l(d(n),1);r.title=s(t,a("titleFormat")),r.start=r.visStart=n,r.end=r.visEnd=c,o(1)}var r=this;r.render=n,te.call(r,t,e,"agendaDay");var a=r.opt,o=r.renderAgenda,i=r.skipHiddenDays,s=e.formatDate}function te(n,r,a){function o(t){Oe=t,i(),te?(c(),Ke()):s()}function i(){je=Qe("theme")?"ui":"fc",Ye=Qe("isRTL"),Je=y(Qe("minTime")),Ve=y(Qe("maxTime")),Xe=Qe("columnFormat"),Ue=Qe("weekNumbers"),Ze=Qe("weekNumberTitle"),$e="iso"!=Qe("weekNumberCalculation")?"w":"W",Ne=Qe("snapMinutes")||Qe("slotMinutes")}function s(){var e,r,a,o,i,s=je+"-widget-header",l=je+"-widget-content",f=0==Qe("slotMinutes")%15;for(c(),pe=t("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(n),Qe("allDaySlot")?(me=t("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(pe),e="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+s+" fc-agenda-axis'>"+Qe("allDayText")+"</th>"+"<td>"+"<div class='fc-day-content'><div style='position:relative'/></div>"+"</td>"+"<th class='"+s+" fc-agenda-gutter'>&nbsp;</th>"+"</tr>"+"</table>",ye=t(e).appendTo(pe),be=ye.find("tr"),M(be.find("td")),pe.append("<div class='fc-agenda-divider "+s+"'>"+"<div class='fc-agenda-divider-inner'/>"+"</div>")):me=t([]),De=t("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(pe),Ce=t("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(De),Me=t("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(Ce),e="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",r=v(),o=u(d(r),Ve),u(r,Je),Le=0,a=0;o>r;a++)i=r.getMinutes(),e+="<tr class='fc-slot"+a+" "+(i?"fc-minor":"")+"'>"+"<th class='fc-agenda-axis "+s+"'>"+(f&&i?"&nbsp;":un(r,Qe("axisFormat")))+"</th>"+"<td class='"+l+"'>"+"<div style='position:relative'>&nbsp;</div>"+"</td>"+"</tr>",u(r,Qe("slotMinutes")),Le++;e+="</tbody></table>",Te=t(e).appendTo(Ce),Se=Te.find("div:first"),T(Te.find("td"))}function c(){var e=h();te&&te.remove(),te=t(e).appendTo(n),ne=te.find("thead"),re=ne.find("th").slice(1,-1),ae=te.find("tbody"),ie=ae.find("td").slice(0,-1),se=ie.find("> div"),le=ie.find(".fc-day-content > div"),ve=ie.eq(0),ge=se.eq(0),j(ne.add(ne.find("tr"))),j(ae.add(ae.find("tr")))}function h(){var t="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'>"+g()+p()+"</table>";return t}function g(){var t,e,n,r=je+"-widget-header",a="";for(a+="<thead><tr>",Ue?(e=un(t,$e),Ye?e+=Ze:e=Ze+e,a+="<th class='fc-agenda-axis fc-week-number "+r+"'>"+I(e)+"</th>"):a+="<th class='fc-agenda-axis "+r+"'>&nbsp;</th>",n=0;Oe>n;n++)t=sn(0,n),a+="<th class='fc-"+we[t.getDay()]+" fc-col"+n+" "+r+"'>"+I(un(t,Xe))+"</th>";return a+="<th class='fc-agenda-gutter "+r+"'>&nbsp;</th>"+"</tr>"+"</thead>"}function p(){var t,e,n,r,a,o=je+"-widget-header",i=je+"-widget-content",s=f(new Date),l="";for(l+="<tbody><tr><th class='fc-agenda-axis "+o+"'>&nbsp;</th>",n="",e=0;Oe>e;e++)t=sn(0,e),a=["fc-col"+e,"fc-"+we[t.getDay()],i],+t==+s&&a.push(je+"-state-highlight","fc-today"),r="<td class='"+a.join(" ")+"'>"+"<div>"+"<div class='fc-day-content'>"+"<div style='position:relative'>&nbsp;</div>"+"</div>"+"</div>"+"</td>",n+=r;return l+=n,l+="<td class='fc-agenda-gutter "+i+"'>&nbsp;</td>"+"</tr>"+"</tbody>"}function m(t,n){t===e&&(t=ke),ke=t,fn={};var r=ae.position().top,a=De.position().top,o=Math.min(t-r,Te.height()+a+1);ge.height(o-F(ve)),pe.css("top",r),De.height(o-a-1),Re=Se.height()+1,We=Qe("slotMinutes")/Ne,Ae=Re/We,n&&D()}function b(e){xe=e,Be.clear(),Ie.clear();var n=ne.find("th:first");ye&&(n=n.add(ye.find("th:first"))),n=n.add(Te.find("th:first")),He=0,S(n.width("").each(function(e,n){He=Math.max(He,t(n).outerWidth())}),He);var r=te.find(".fc-agenda-gutter");ye&&(r=r.add(ye.find("th.fc-agenda-gutter")));var a=De[0].clientWidth;Fe=De.width()-a,Fe?(S(r,Fe),r.show().prev().removeClass("fc-last")):r.hide().prev().addClass("fc-last"),ze=Math.floor((a-He)/Oe),S(re.slice(0,-1),ze)}function D(){function t(){De.scrollTop(r)}var e=v(),n=d(e);n.setHours(Qe("firstHour"));var r=q(e,n)+1;t(),setTimeout(t,0)}function w(){Pe=De.scrollTop()}function C(){De.scrollTop(Pe)}function M(t){t.click(x).mousedown(an)}function T(t){t.click(x).mousedown(Z)}function x(t){if(!Qe("selectable")){var e=Math.min(Oe-1,Math.floor((t.pageX-te.offset().left-He)/ze)),n=sn(0,e),r=this.parentNode.className.match(/fc-slot(\d+)/);if(r){var a=parseInt(r[1])*Qe("slotMinutes"),o=Math.floor(a/60);n.setHours(o),n.setMinutes(a%60+Je),Ge("dayClick",ie[e],n,!1,t)}else Ge("dayClick",ie[e],n,!0,t)}}function k(t,e,n){n&&_e.build();for(var r=cn(t,e),a=0;r.length>a;a++){var o=r[a];M(H(o.row,o.leftCol,o.row,o.rightCol))}}function H(t,e,n,r){var a=_e.rect(t,e,n,r,pe);return tn(a,pe)}function z(t,e){for(var n=0;Oe>n;n++){var r=sn(0,n),a=l(d(r),1),o=new Date(Math.max(r,t)),i=new Date(Math.min(a,e));if(i>o){var s=_e.rect(0,n,0,n,Ce),c=q(r,o),u=q(r,i);s.top=c,s.height=u-c,T(tn(s,Ce))}}}function R(t){return Be.left(t)}function N(t){return Ie.left(t)}function W(t){return Be.right(t)}function A(t){return Ie.right(t)}function O(t){return Qe("allDaySlot")&&!t.row}function _(t){var e=sn(0,t.col),n=t.row;return Qe("allDaySlot")&&n--,n>=0&&u(e,Je+n*Ne),e}function q(t,n){if(t=d(t,!0),u(d(t),Je)>n)return 0;if(n>=u(d(t),Ve))return Te.height();var r=Qe("slotMinutes"),a=60*n.getHours()+n.getMinutes()-Je,o=Math.floor(a/r),i=fn[o];return i===e&&(i=fn[o]=Te.find("tr:eq("+o+") td div")[0].offsetTop),Math.max(0,Math.round(i-1+Re*(a%r/r)))}function B(){return be}function Y(t){var e=d(t.start);return t.allDay?e:u(e,Qe("defaultEventMinutes"))}function J(t,e){return e?d(t):u(d(t),Qe("slotMinutes"))}function V(t,e,n){n?Qe("allDaySlot")&&k(t,l(d(e),1),!0):X(t,e)}function X(e,n){var r=Qe("selectHelper");if(_e.build(),r){var a=ln(e).col;if(a>=0&&Oe>a){var o=_e.rect(0,a,0,a,Ce),i=q(e,e),s=q(e,n);if(s>i){if(o.top=i,o.height=s-i,o.left+=2,o.width-=5,t.isFunction(r)){var l=r(e,n);l&&(o.position="absolute",o.zIndex=8,Ee=t(l).css(o).appendTo(Ce))}else o.isStart=!0,o.isEnd=!0,Ee=t(on({title:"",start:e,end:n,className:["fc-select-helper"],editable:!1},o)),Ee.css("opacity",Qe("dragOpacity"));Ee&&(T(Ee),Ce.append(Ee),S(Ee,o.width,!0),E(Ee,o.height,!0))}}}else z(e,n)}function U(){en(),Ee&&(Ee.remove(),Ee=null)}function Z(e){if(1==e.which&&Qe("selectable")){rn(e);var n;qe.start(function(t,e){if(U(),t&&t.col==e.col&&!O(t)){var r=_(e),a=_(t);n=[r,u(d(r),Ne),a,u(d(a),Ne)].sort(L),X(n[0],n[3])}else n=null},e),t(document).one("mouseup",function(t){qe.stop(),n&&(+n[0]==+n[1]&&$(n[0],!1,t),nn(n[0],n[3],!1,t))})}}function $(t,e,n){Ge("dayClick",ie[ln(t).col],t,e,n)}function Q(t,e){qe.start(function(t){if(en(),t)if(O(t))H(t.row,t.col,t.row,t.col);else{var e=_(t),n=u(d(e),Qe("defaultEventMinutes"));z(e,n)}},e)}function G(t,e,n){var r=qe.stop();en(),r&&Ge("drop",t,_(r),O(r),e,n)}var K=this;K.renderAgenda=o,K.setWidth=b,K.setHeight=m,K.beforeHide=w,K.afterShow=C,K.defaultEventEnd=Y,K.timePosition=q,K.getIsCellAllDay=O,K.allDayRow=B,K.getHoverListener=function(){return qe},K.colLeft=R,K.colRight=W,K.colContentLeft=N,K.colContentRight=A,K.getDaySegmentContainer=function(){return me},K.getSlotSegmentContainer=function(){return Me},K.getMinMinute=function(){return Je},K.getMaxMinute=function(){return Ve},K.getSlotContainer=function(){return Ce},K.getRowCnt=function(){return 1},K.getColCnt=function(){return Oe},K.getColWidth=function(){return ze},K.getSnapHeight=function(){return Ae},K.getSnapMinutes=function(){return Ne},K.defaultSelectionEnd=J,K.renderDayOverlay=k,K.renderSelection=V,K.clearSelection=U,K.reportDayClick=$,K.dragStart=Q,K.dragStop=G,oe.call(K,n,r,a),ue.call(K),ce.call(K),ee.call(K);var te,ne,re,ae,ie,se,le,ve,ge,pe,me,ye,be,De,Ce,Me,Te,Se,Ee,xe,ke,He,ze,Fe,Re,Ne,We,Ae,Oe,Le,_e,qe,Be,Ie,Pe,je,Ye,Je,Ve,Xe,Ue,Ze,$e,Qe=K.opt,Ge=K.trigger,Ke=K.clearEvents,tn=K.renderOverlay,en=K.clearOverlays,nn=K.reportSelection,rn=K.unselect,an=K.daySelectionMousedown,on=K.slotSegHtml,sn=K.cellToDate,ln=K.dateToCell,cn=K.rangeToSegments,un=r.formatDate,fn={};P(n.addClass("fc-agenda")),_e=new fe(function(e,n){function r(t){return Math.max(l,Math.min(c,t))}var a,o,i;re.each(function(e,r){a=t(r),o=a.offset().left,e&&(i[1]=o),i=[o],n[e]=i}),i[1]=o+a.outerWidth(),Qe("allDaySlot")&&(a=be,o=a.offset().top,e[0]=[o,o+a.outerHeight()]);for(var s=Ce.offset().top,l=De.offset().top,c=l+De.outerHeight(),u=0;Le*We>u;u++)e.push([r(s+Ae*u),r(s+Ae*(u+1))])}),qe=new de(_e),Be=new he(function(t){return se.eq(t)}),Ie=new he(function(t){return le.eq(t)})}function ee(){function n(t,e){S(t);var n,r=t.length,o=[],i=[];for(n=0;r>n;n++)t[n].allDay?o.push(t[n]):i.push(t[n]);y("allDaySlot")&&(ae(o,e),z()),s(a(i),e),b("eventAfterAllRender")}function r(){k(),R().empty(),N().empty()}function a(e){var n,r,a,s,l,c,f,v=j(),h=O(),g=A(),p=t.map(e,i),m=[];for(r=0;v>r;r++)for(n=B(0,r),u(n,h),a=ne(o(e,p,n,u(d(n),g-h))),re(a),s=0;a.length>s;s++)for(l=a[s],c=0;l.length>c;c++)f=l[c],f.col=r,f.level=s,m.push(f);return m}function o(t,e,n,r){var a,o,i,s,l,c,u,f,v=[],h=t.length;for(a=0;h>a;a++)o=t[a],i=o.start,s=e[a],s>n&&r>i&&(n>i?(l=d(n),u=!1):(l=i,u=!0),s>r?(c=d(r),f=!1):(c=s,f=!0),v.push({event:o,start:l,end:c,isStart:u,isEnd:f,msLength:c-l}));return v.sort(P)}function i(t){return t.end?d(t.end):u(d(t.start),y("defaultEventMinutes"))}function s(n,r){var a,o,i,s,l,u,d,v,h,g,p,m,D,w,C,M,S,E,k,H=n.length,z="",R=N();for(k=(E=y("isRTL"))?-1:1,a=0;H>a;a++)o=n[a],i=o.event,s=L(o.start,o.start),l=L(o.start,o.end),u=o.col,d=o.level,v=o.forward||0,h=_(u),g=q(u)-h,g=Math.min(g-6,.95*g),p=d?g/(d+v+1):v?2*(g/(v+1)-6):g,m=h+g/(d+v+1)*d*k+(E?g-p:0),o.top=s,o.left=m,o.outerWidth=p,o.outerHeight=l-s,z+=c(i,o);for(R[0].innerHTML=z,D=R.children(),a=0;H>a;a++)o=n[a],i=o.event,w=t(D[a]),C=b("eventRender",i,i,w),C===!1?w.remove():(C&&C!==!0&&(w.remove(),w=t(C).css({position:"absolute",top:o.top,left:o.left}).appendTo(R)),o.element=w,i._id===r?f(i,w,o):w[0]._fci=a,Z(i,w));for(T(R,n,f),a=0;H>a;a++)o=n[a],(w=o.element)&&(o.vsides=F(w,!0),o.hsides=x(w,!0),M=w.find(".fc-event-title"),M.length&&(o.contentTop=M[0].offsetTop));for(a=0;H>a;a++)o=n[a],(w=o.element)&&(w[0].style.width=Math.max(0,o.outerWidth-o.hsides)+"px",S=Math.max(0,o.outerHeight-o.vsides),w[0].style.height=S+"px",i=o.event,o.contentTop!==e&&10>S-o.contentTop&&(w.find("div.fc-event-time").text(se(i.start,y("timeFormat"))+" - "+i.title),w.find("div.fc-event-title").remove()),b("eventAfterRender",i,i,w))}function c(t,e){var n="<",r=t.url,a=Y(t,y),o=["fc-event","fc-event-vert"];return D(t)&&o.push("fc-event-draggable"),e.isStart&&o.push("fc-event-start"),e.isEnd&&o.push("fc-event-end"),o=o.concat(t.className),t.source&&(o=o.concat(t.source.className||[])),n+=r?"a href='"+I(t.url)+"'":"div",n+=" class='"+o.join(" ")+"'"+" style='position:absolute;z-index:8;top:"+e.top+"px;left:"+e.left+"px;"+a+"'"+">"+"<div class='fc-event-inner'>"+"<div class='fc-event-time'>"+I(le(t.start,t.end,y("timeFormat")))+"</div>"+"<div class='fc-event-title'>"+I(t.title)+"</div>"+"</div>"+"<div class='fc-event-bg'></div>",e.isEnd&&w(t)&&(n+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"),n+="</"+(r?"a":"div")+">"}function f(t,e,n){var r=e.find("div.fc-event-time");D(t)&&g(t,e,r),n.isEnd&&w(t)&&p(t,e,r),H(t,e)}function v(t,e,n){function r(){c||(e.width(a).height("").draggable("option","grid",null),c=!0)}var a,o,i,s=n.isStart,c=!0,u=W(),f=J(),v=V(),g=X(),p=O();e.draggable({zIndex:9,opacity:y("dragOpacity","month"),revertDuration:y("dragRevertDuration"),start:function(n,p){b("eventDragStart",e,t,n,p),Q(t,e),a=e.width(),u.start(function(n,a){if(ee(),n){o=!1;var u=B(0,a.col),p=B(0,n.col);i=h(p,u),n.row?s?c&&(e.width(f-10),E(e,v*Math.round((t.end?(t.end-t.start)/Te:y("defaultEventMinutes"))/g)),e.draggable("option","grid",[f,1]),c=!1):o=!0:(te(l(d(t.start),i),l(C(t),i)),r()),o=o||c&&!i
}else r(),o=!0;e.draggable("option","revert",o)},n,"drag")},stop:function(n,a){if(u.stop(),ee(),b("eventDragStop",e,t,n,a),o)r(),e.css("filter",""),$(t,e);else{var s=0;c||(s=Math.round((e.offset().top-U().offset().top)/v)*g+p-(60*t.start.getHours()+t.start.getMinutes())),G(this,t,i,s,c,n,a)}}})}function g(t,e,n){function r(e){var r,a=u(d(t.start),e);t.end&&(r=u(d(t.end),e)),n.text(le(a,r,y("timeFormat")))}function a(){f&&(n.css("display",""),e.draggable("option","grid",[p,m]),f=!1)}var o,i,s,c,f=!1,v=W(),g=j(),p=J(),m=V(),D=X();e.draggable({zIndex:9,scroll:!1,grid:[p,m],axis:1==g?"y":!1,opacity:y("dragOpacity"),revertDuration:y("dragRevertDuration"),start:function(r,u){b("eventDragStart",e,t,r,u),Q(t,e),o=e.position(),s=c=0,v.start(function(r,o){if(e.draggable("option","revert",!r),ee(),r){var s=B(0,o.col),c=B(0,r.col);i=h(c,s),y("allDaySlot")&&!r.row?(f||(f=!0,n.hide(),e.draggable("option","grid",null)),te(l(d(t.start),i),l(C(t),i))):a()}},r,"drag")},drag:function(t,e){s=Math.round((e.position.top-o.top)/m)*D,s!=c&&(f||r(s),c=s)},stop:function(n,l){var c=v.stop();ee(),b("eventDragStop",e,t,n,l),c&&(i||s||f)?G(this,t,i,f?0:s,f,n,l):(a(),e.css("filter",""),e.css(o),r(0),$(t,e))}})}function p(t,e,n){var r,a,o=V(),i=X();e.resizable({handles:{s:".ui-resizable-handle"},grid:o,start:function(n,o){r=a=0,Q(t,e),e.css("z-index",9),b("eventResizeStart",this,t,n,o)},resize:function(s,l){r=Math.round((Math.max(o,e.height())-l.originalSize.height)/o),r!=a&&(n.text(le(t.start,r||t.end?u(M(t),i*r):null,y("timeFormat"))),a=r)},stop:function(n,a){b("eventResizeStop",this,t,n,a),r?K(this,t,0,i*r,n,a):(e.css("z-index",8),$(t,e))}})}var m=this;m.renderEvents=n,m.clearEvents=r,m.slotSegHtml=c,ie.call(m);var y=m.opt,b=m.trigger,D=m.isEventDraggable,w=m.isEventResizable,M=m.eventEnd,S=m.reportEvents,k=m.reportEventClear,H=m.eventElementHandlers,z=m.setHeight,R=m.getDaySegmentContainer,N=m.getSlotSegmentContainer,W=m.getHoverListener,A=m.getMaxMinute,O=m.getMinMinute,L=m.timePosition,_=m.colContentLeft,q=m.colContentRight,B=m.cellToDate,P=m.segmentCompare,j=m.getColCnt,J=m.getColWidth,V=m.getSnapHeight,X=m.getSnapMinutes,U=m.getSlotContainer,Z=m.reportEventElement,$=m.showEvents,Q=m.hideEvents,G=m.eventDrop,K=m.eventResize,te=m.renderDayOverlay,ee=m.clearOverlays,ae=m.renderDayEvents,oe=m.calendar,se=oe.formatDate,le=oe.formatDates;m.draggableDayEvent=v}function ne(t){var e,n,r,a,o,i=[],s=t.length;for(e=0;s>e;e++){for(n=t[e],r=0;;){if(a=!1,i[r])for(o=0;i[r].length>o;o++)if(ae(i[r][o],n)){a=!0;break}if(!a)break;r++}i[r]?i[r].push(n):i[r]=[n]}return i}function re(t){var e,n,r,a,o,i;for(e=t.length-1;e>0;e--)for(a=t[e],n=0;a.length>n;n++)for(o=a[n],r=0;t[e-1].length>r;r++)i=t[e-1][r],ae(o,i)&&(i.forward=Math.max(i.forward||0,(o.forward||0)+1))}function ae(t,e){return t.end>e.start&&t.start<e.end}function oe(n,r,a){function o(e,n){var r=Z[e];return t.isPlainObject(r)?B(r,n||a):r}function i(t,e){return r.trigger.apply(r,[t,e||I].concat(Array.prototype.slice.call(arguments,2),[I]))}function s(t){return f(t)&&!o("disableDragging")}function c(t){return f(t)&&!o("disableResizing")}function f(t){return V(t.editable,(t.source||{}).editable,o("editable"))}function v(t){J={};var e,n,r=t.length;for(e=0;r>e;e++)n=t[e],J[n._id]?J[n._id].push(n):J[n._id]=[n]}function g(t){return t.end?d(t.end):P(t)}function p(t,e){X.push(e),U[t._id]?U[t._id].push(e):U[t._id]=[e]}function m(){X=[],U={}}function y(t,n){n.click(function(r){return n.hasClass("ui-draggable-dragging")||n.hasClass("ui-resizable-resizing")?e:i("eventClick",this,t,r)}).hover(function(e){i("eventMouseover",this,t,e)},function(e){i("eventMouseout",this,t,e)})}function b(t,e){w(t,e,"show")}function D(t,e){w(t,e,"hide")}function w(t,e,n){var r,a=U[t._id],o=a.length;for(r=0;o>r;r++)e&&a[r][0]==e[0]||a[r][n]()}function C(t,e,n,r,a,o,s){var l=e.allDay,c=e._id;T(J[c],n,r,a),i("eventDrop",t,e,n,r,a,function(){T(J[c],-n,-r,l),Y(c)},o,s),Y(c)}function M(t,e,n,r,a,o){var s=e._id;S(J[s],n,r),i("eventResize",t,e,n,r,function(){S(J[s],-n,-r),Y(s)},a,o),Y(s)}function T(t,n,r,a){r=r||0;for(var o,i=t.length,s=0;i>s;s++)o=t[s],a!==e&&(o.allDay=a),u(l(o.start,n,!0),r),o.end&&(o.end=u(l(o.end,n,!0),r)),j(o,Z)}function S(t,e,n){n=n||0;for(var r,a=t.length,o=0;a>o;o++)r=t[o],r.end=u(l(g(r),e,!0),n),j(r,Z)}function E(t){return"object"==typeof t&&(t=t.getDay()),G[t]}function x(){return $}function k(t,e,n){for(e=e||1;G[(t.getDay()+(n?e:0)+7)%7];)l(t,e)}function H(){var t=z.apply(null,arguments),e=F(t),n=R(e);return n}function z(t,e){var n=I.getColCnt(),r=ee?-1:1,a=ee?n-1:0;"object"==typeof t&&(e=t.col,t=t.row);var o=t*n+(e*r+a);return o}function F(t){var e=I.visStart.getDay();return t+=K[e],7*Math.floor(t/$)+te[(t%$+$)%$]-e}function R(t){var e=d(I.visStart);return l(e,t),e}function N(t){var e=W(t),n=A(e),r=O(n);return r}function W(t){return h(t,I.visStart)}function A(t){var e=I.visStart.getDay();return t+=e,Math.floor(t/7)*$+K[(t%7+7)%7]-K[e]}function O(t){var e=I.getColCnt(),n=ee?-1:1,r=ee?e-1:0,a=Math.floor(t/e),o=(t%e+e)%e*n+r;return{row:a,col:o}}function L(t,e){for(var n=I.getRowCnt(),r=I.getColCnt(),a=[],o=W(t),i=W(e),s=A(o),l=A(i)-1,c=0;n>c;c++){var u=c*r,f=u+r-1,d=Math.max(s,u),v=Math.min(l,f);if(v>=d){var h=O(d),g=O(v),p=[h.col,g.col].sort(),m=F(d)==o,y=F(v)+1==i;a.push({row:c,leftCol:p[0],rightCol:p[1],isStart:m,isEnd:y})}}return a}function _(t,e){return q(t,e)||t.event.start-e.event.start||(t.event.title||"").localeCompare(e.event.title)}function q(t,e){return"msLength"in t?e.msLength-t.msLength:e.rightCol-e.leftCol-(t.rightCol-t.leftCol)||e.event.allDay-t.event.allDay}var I=this;I.element=n,I.calendar=r,I.name=a,I.opt=o,I.trigger=i,I.isEventDraggable=s,I.isEventResizable=c,I.reportEvents=v,I.eventEnd=g,I.reportEventElement=p,I.reportEventClear=m,I.eventElementHandlers=y,I.showEvents=b,I.hideEvents=D,I.eventDrop=C,I.eventResize=M;var P=I.defaultEventEnd,j=r.normalizeEvent,Y=r.reportEventChange,J={},X=[],U={},Z=r.options;I.isHiddenDay=E,I.skipHiddenDays=k,I.getCellsPerWeek=x,I.dateToCell=N,I.dateToDayOffset=W,I.dayOffsetToCellOffset=A,I.cellOffsetToCell=O,I.cellToDate=H,I.cellToCellOffset=z,I.cellOffsetToDayOffset=F,I.dayOffsetToDate=R,I.rangeToSegments=L,I.segmentCompare=_;var $,Q=o("hiddenDays")||[],G=[],K=[],te=[],ee=o("isRTL");(function(){o("weekends")===!1&&Q.push(0,6);for(var e=0,n=0;7>e;e++)K[e]=n,G[e]=-1!=t.inArray(e,Q),G[e]||(te[n]=e,n++);if($=n,!$)throw"invalid hiddenDays"})()}function ie(){function e(t,e){var n=r(t,!1,!0);le(n,function(t,e){R(t.event,e)}),b(n,e),le(n,function(t,e){k("eventAfterRender",t.event,t.event,e)})}function n(t,e,n){var a=r([t],!0,!1),o=[];return le(a,function(t,r){t.row===e&&r.css("top",n),o.push(r[0])}),o}function r(e,n,r){var o,l,c=Z(),d=n?t("<div/>"):c,v=a(e);return i(v),o=s(v),d[0].innerHTML=o,l=d.children(),n&&c.append(l),u(v,l),le(v,function(t,e){t.hsides=x(e,!0)}),le(v,function(t,e){e.width(Math.max(0,t.outerWidth-t.hsides))}),le(v,function(t,e){t.outerHeight=e.outerHeight(!0)}),f(v,r),v}function a(t){for(var e=[],n=0;t.length>n;n++){var r=o(t[n]);e.push.apply(e,r)}return e}function o(t){for(var e=t.start,n=C(t),r=ee(e,n),a=0;r.length>a;a++)r[a].event=t;return r}function i(t){for(var e=E("isRTL"),n=0;t.length>n;n++){var r=t[n],a=(e?r.isEnd:r.isStart)?X:J,o=(e?r.isStart:r.isEnd)?U:V,i=a(r.leftCol),s=o(r.rightCol);r.left=i,r.outerWidth=s-i}}function s(t){for(var e="",n=0;t.length>n;n++)e+=c(t[n]);return e}function c(t){var e="",n=E("isRTL"),r=t.event,a=r.url,o=["fc-event","fc-event-hori"];H(r)&&o.push("fc-event-draggable"),t.isStart&&o.push("fc-event-start"),t.isEnd&&o.push("fc-event-end"),o=o.concat(r.className),r.source&&(o=o.concat(r.source.className||[]));var i=Y(r,E);return e+=a?"<a href='"+I(a)+"'":"<div",e+=" class='"+o.join(" ")+"'"+" style="+"'"+"position:absolute;"+"z-index:8;"+"left:"+t.left+"px;"+i+"'"+">"+"<div class='fc-event-inner'>",!r.allDay&&t.isStart&&(e+="<span class='fc-event-time'>"+I($(r.start,r.end,E("timeFormat")))+"</span>"),e+="<span class='fc-event-title'>"+I(r.title)+"</span>"+"</div>",t.isEnd&&z(r)&&(e+="<div class='ui-resizable-handle ui-resizable-"+(n?"w":"e")+"'>"+"&nbsp;&nbsp;&nbsp;"+"</div>"),e+="</"+(a?"a":"div")+">"}function u(e,n){for(var r=0;e.length>r;r++){var a=e[r],o=a.event,i=n.eq(r),s=k("eventRender",o,o,i);s===!1?i.remove():(s&&s!==!0&&(s=t(s).css({position:"absolute",zIndex:8,left:a.left}),i.replaceWith(s),i=s),a.element=i)}}function f(t,e){var n=v(t),r=y(),a=[];if(e)for(var o=0;r.length>o;o++)r[o].height(n[o]);for(var o=0;r.length>o;o++)a.push(r[o].position().top);le(t,function(t,e){e.css("top",a[t.row]+t.top)})}function v(t){for(var e=q(),n=B(),r=[],a=g(t),o=0;e>o;o++){for(var i=a[o],s=[],l=0;n>l;l++)s.push(0);for(var c=0;i.length>c;c++){var u=i[c];u.top=_(s.slice(u.leftCol,u.rightCol+1));for(var l=u.leftCol;u.rightCol>=l;l++)s[l]=u.top+u.outerHeight}r.push(_(s))}return r}function g(t){var e,n,r,a=q(),o=[];for(e=0;t.length>e;e++)n=t[e],r=n.row,n.element&&(o[r]?o[r].push(n):o[r]=[n]);for(r=0;a>r;r++)o[r]=p(o[r]||[]);return o}function p(t){for(var e=[],n=m(t),r=0;n.length>r;r++)e.push.apply(e,n[r]);return e}function m(t){t.sort(ne);for(var e=[],n=0;t.length>n;n++){for(var r=t[n],a=0;e.length>a&&se(r,e[a]);a++);e[a]?e[a].push(r):e[a]=[r]}return e}function y(){var t,e=q(),n=[];for(t=0;e>t;t++)n[t]=j(t).find("div.fc-day-content > div");return n}function b(t,e){var n=Z();le(t,function(t,n,r){var a=t.event;a._id===e?D(a,n,t):n[0]._fci=r}),T(n,t,D)}function D(t,e,n){H(t)&&S.draggableDayEvent(t,e,n),n.isEnd&&z(t)&&S.resizableDayEvent(t,e,n),N(t,e)}function w(t,e){var n,r=te();e.draggable({zIndex:9,delay:50,opacity:E("dragOpacity"),revertDuration:E("dragRevertDuration"),start:function(a,o){k("eventDragStart",e,t,a,o),A(t,e),r.start(function(r,a,o,i){if(e.draggable("option","revert",!r||!o&&!i),G(),r){var s=re(a),c=re(r);n=h(c,s),Q(l(d(t.start),n),l(C(t),n))}else n=0},a,"drag")},stop:function(a,o){r.stop(),G(),k("eventDragStop",e,t,a,o),n?O(this,t,n,0,t.allDay,a,o):(e.css("filter",""),W(t,e))}})}function M(e,r,a){var o=E("isRTL"),i=o?"w":"e",s=r.find(".ui-resizable-"+i),c=!1;P(r),r.mousedown(function(t){t.preventDefault()}).click(function(t){c&&(t.preventDefault(),t.stopImmediatePropagation())}),s.mousedown(function(o){function s(n){k("eventResizeStop",this,e,n),t("body").css("cursor",""),u.stop(),G(),f&&L(this,e,f,0,n),setTimeout(function(){c=!1},0)}if(1==o.which){c=!0;var u=te();q(),B();var f,d,v=r.css("top"),h=t.extend({},e),g=ce(ie(e.start));K(),t("body").css("cursor",i+"-resize").one("mouseup",s),k("eventResizeStart",this,e,o),u.start(function(r,o){if(r){var s=ae(o),c=ae(r);if(c=Math.max(c,g),f=oe(c)-oe(s)){h.end=l(F(e),f,!0);var u=d;d=n(h,a.row,v),d=t(d),d.find("*").css("cursor",i+"-resize"),u&&u.remove(),A(e)}else d&&(W(e),d.remove(),d=null);G(),Q(e.start,l(C(e),f))}},o)}})}var S=this;S.renderDayEvents=e,S.draggableDayEvent=w,S.resizableDayEvent=M;var E=S.opt,k=S.trigger,H=S.isEventDraggable,z=S.isEventResizable,F=S.eventEnd,R=S.reportEventElement,N=S.eventElementHandlers,W=S.showEvents,A=S.hideEvents,O=S.eventDrop,L=S.eventResize,q=S.getRowCnt,B=S.getColCnt;S.getColWidth;var j=S.allDayRow,J=S.colLeft,V=S.colRight,X=S.colContentLeft,U=S.colContentRight;S.dateToCell;var Z=S.getDaySegmentContainer,$=S.calendar.formatDates,Q=S.renderDayOverlay,G=S.clearOverlays,K=S.clearSelection,te=S.getHoverListener,ee=S.rangeToSegments,ne=S.segmentCompare,re=S.cellToDate,ae=S.cellToCellOffset,oe=S.cellOffsetToDayOffset,ie=S.dateToDayOffset,ce=S.dayOffsetToCellOffset}function se(t,e){for(var n=0;e.length>n;n++){var r=e[n];if(r.leftCol<=t.rightCol&&r.rightCol>=t.leftCol)return!0}return!1}function le(t,e){for(var n=0;t.length>n;n++){var r=t[n],a=r.element;a&&e(r,a,n)}}function ce(){function e(t,e,a){n(),e||(e=l(t,a)),c(t,e,a),r(t,e,a)}function n(t){f&&(f=!1,u(),s("unselect",null,t))}function r(t,e,n,r){f=!0,s("select",null,t,e,n,r)}function a(e){var a=o.cellToDate,s=o.getIsCellAllDay,l=o.getHoverListener(),f=o.reportDayClick;if(1==e.which&&i("selectable")){n(e);var d;l.start(function(t,e){u(),t&&s(t)?(d=[a(e),a(t)].sort(L),c(d[0],d[1],!0)):d=null},e),t(document).one("mouseup",function(t){l.stop(),d&&(+d[0]==+d[1]&&f(d[0],!0,t),r(d[0],d[1],!0,t))})}}var o=this;o.select=e,o.unselect=n,o.reportSelection=r,o.daySelectionMousedown=a;var i=o.opt,s=o.trigger,l=o.defaultSelectionEnd,c=o.renderSelection,u=o.clearSelection,f=!1;i("selectable")&&i("unselectAuto")&&t(document).mousedown(function(e){var r=i("unselectCancel");r&&t(e.target).parents(r).length||n(e)})}function ue(){function e(e,n){var r=o.shift();return r||(r=t("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>")),r[0].parentNode!=n[0]&&r.appendTo(n),a.push(r.css(e).show()),r}function n(){for(var t;t=a.shift();)o.push(t.hide().unbind())}var r=this;r.renderOverlay=e,r.clearOverlays=n;var a=[],o=[]}function fe(t){var e,n,r=this;r.build=function(){e=[],n=[],t(e,n)},r.cell=function(t,r){var a,o=e.length,i=n.length,s=-1,l=-1;for(a=0;o>a;a++)if(r>=e[a][0]&&e[a][1]>r){s=a;break}for(a=0;i>a;a++)if(t>=n[a][0]&&n[a][1]>t){l=a;break}return s>=0&&l>=0?{row:s,col:l}:null},r.rect=function(t,r,a,o,i){var s=i.offset();return{top:e[t][0]-s.top,left:n[r][0]-s.left,width:n[o][1]-n[r][0],height:e[a][1]-e[t][0]}}}function de(e){function n(t){ve(t);var n=e.cell(t.pageX,t.pageY);(!n!=!i||n&&(n.row!=i.row||n.col!=i.col))&&(n?(o||(o=n),a(n,o,n.row-o.row,n.col-o.col)):a(n,o),i=n)}var r,a,o,i,s=this;s.start=function(s,l,c){a=s,o=i=null,e.build(),n(l),r=c||"mousemove",t(document).bind(r,n)},s.stop=function(){return t(document).unbind(r,n),i}}function ve(t){t.pageX===e&&(t.pageX=t.originalEvent.pageX,t.pageY=t.originalEvent.pageY)}function he(t){function n(e){return a[e]=a[e]||t(e)}var r=this,a={},o={},i={};r.left=function(t){return o[t]=o[t]===e?n(t).position().left:o[t]},r.right=function(t){return i[t]=i[t]===e?r.left(t)+n(t).width():i[t]},r.clear=function(){a={},o={},i={}}}var ge={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"iso",weekNumberTitle:"W",allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"<span class='fc-text-arrow'>&lsaquo;</span>",next:"<span class='fc-text-arrow'>&rsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&laquo;</span>",nextYear:"<span class='fc-text-arrow'>&raquo;</span>",today:"today",month:"month",week:"week",day:"day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*"},pe={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"<span class='fc-text-arrow'>&rsaquo;</span>",next:"<span class='fc-text-arrow'>&lsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&raquo;</span>",nextYear:"<span class='fc-text-arrow'>&laquo;</span>"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},me=t.fullCalendar={version:"1.6.2"},ye=me.views={};t.fn.fullCalendar=function(n){if("string"==typeof n){var a,o=Array.prototype.slice.call(arguments,1);return this.each(function(){var r=t.data(this,"fullCalendar");if(r&&t.isFunction(r[n])){var i=r[n].apply(r,o);a===e&&(a=i),"destroy"==n&&t.removeData(this,"fullCalendar")}}),a!==e?a:this}var i=n.eventSources||[];return delete n.eventSources,n.events&&(i.push(n.events),delete n.events),n=t.extend(!0,{},ge,n.isRTL||n.isRTL===e&&ge.isRTL?pe:{},n),this.each(function(e,a){var o=t(a),s=new r(o,n,i);o.data("fullCalendar",s),s.render()}),this},me.sourceNormalizers=[],me.sourceFetchers=[];var be={dataType:"json",cache:!1},De=1;me.addDays=l,me.cloneDate=d,me.parseDate=p,me.parseISO8601=m,me.parseTime=y,me.formatDate=b,me.formatDates=D;var we=["sun","mon","tue","wed","thu","fri","sat"],Ce=864e5,Me=36e5,Te=6e4,Se={s:function(t){return t.getSeconds()},ss:function(t){return q(t.getSeconds())},m:function(t){return t.getMinutes()},mm:function(t){return q(t.getMinutes())},h:function(t){return t.getHours()%12||12},hh:function(t){return q(t.getHours()%12||12)},H:function(t){return t.getHours()},HH:function(t){return q(t.getHours())},d:function(t){return t.getDate()},dd:function(t){return q(t.getDate())},ddd:function(t,e){return e.dayNamesShort[t.getDay()]},dddd:function(t,e){return e.dayNames[t.getDay()]},M:function(t){return t.getMonth()+1},MM:function(t){return q(t.getMonth()+1)},MMM:function(t,e){return e.monthNamesShort[t.getMonth()]},MMMM:function(t,e){return e.monthNames[t.getMonth()]},yy:function(t){return(t.getFullYear()+"").substring(2)},yyyy:function(t){return t.getFullYear()},t:function(t){return 12>t.getHours()?"a":"p"},tt:function(t){return 12>t.getHours()?"am":"pm"},T:function(t){return 12>t.getHours()?"A":"P"},TT:function(t){return 12>t.getHours()?"AM":"PM"},u:function(t){return b(t,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(t){var e=t.getDate();return e>10&&20>e?"th":["st","nd","rd"][e%10-1]||"th"},w:function(t,e){return e.weekNumberCalculation(t)},W:function(t){return w(t)}};me.dateFormatters=Se,me.applyAll=J,ye.month=X,ye.basicWeek=U,ye.basicDay=Z,n({weekMode:"fixed"}),ye.agendaWeek=G,ye.agendaDay=K,n({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24})})(jQuery);